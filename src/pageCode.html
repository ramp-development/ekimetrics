<script>
    initiateNewsletterForm();
    function initiateNewsletterForm() {
        const form = document.querySelector('form[name="newsletterForm"');
        form.addEventListener('submit', checkNewsletterForm);
    };

    // Function to validate the email format
    function isValidEmail(email) {
        console.log(`Email: ${email}`);
        if (!email) return false;

        // Simple regex to validate email format (you can expand this if necessary)
        const pattern = /[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/g,
            result = pattern.test(email);

        console.log('Email result:');
        console.log(result);
        return result;
    }

    // Function to validate that a field is not empty or contains only whitespace
    function isNotEmpty(value) {
        console.log(`Value: ${value}`);

        const result = value && value.trim().length > 0;
        console.log('Value result:');
        console.log(result);
        return result;
    }

    // Function to check the form inputs before submission
    function checkNewsletterForm(event) {
        console.log('Form submitted');

        // Get form elements
        const firstNameEl = event.target.querySelector('#first-name');
        const lastNameEl = event.target.querySelector('#last-name');
        const emailEl = event.target.querySelector('#email');
        const companyName2El = event.target.querySelector('#company-name-2');

        // Prevent submission if first or last name contains numbers
        const numberPattern = /\d/;
        if (numberPattern.test(firstNameEl.value)) {
            console.log("Invalid first name");
            event.preventDefault();
            alert("First name should not contain numbers.");
            firstNameEl.focus();
            return false;
        }

        if (numberPattern.test(lastNameEl.value)) {
            console.log("Invalid last name");
            event.preventDefault();
            alert("Last name should not contain numbers.");
            lastNameEl.focus();
            return false;
        }

        // Email validation
        if (!isValidEmail(emailEl.value)) {
            console.log("Invalid email");
            event.preventDefault();
            alert("Please enter a valid email address (name@host.com)");
            emailEl.focus();
            return false;
        }

        if (isNotEmpty(companyName2El.value)) {
            console.log("HoneyPot!");
            return true;
        }

        event.target.method = 'post';
        event.target.action = atob('aHR0cHM6Ly9jbC5zNTAuZXhjdC5uZXQvc3Vic2NyaWJlLmFzcHg/bGlkPTkyMjc=');

        // If all validations pass, allow form submission
        return true;
    }
</script>